<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Centrum Rub√°ƒçek - Rezervaƒçn√≠ Syst√©m (Test Version)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .test-badge {
            background: #ffc107;
            color: #000;
            padding: 8px 16px;
            border-radius: 20px;
            display: inline-block;
            margin-top: 10px;
            font-weight: bold;
        }

        .tabs {
            display: flex;
            background: #f5f5f5;
            border-bottom: 2px solid #ddd;
        }

        .tab {
            flex: 1;
            padding: 15px 20px;
            border: none;
            background: transparent;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
        }

        .tab:hover {
            background: #e8e8e8;
        }

        .tab.active {
            background: white;
            color: #667eea;
            border-bottom-color: #667eea;
        }

        .tab-content {
            display: none;
            padding: 30px;
        }

        .tab-content.active {
            display: block;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .form-card {
            background: #f9f9f9;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 25px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .form-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .lessons-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
        }

        .lesson-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s;
        }

        .lesson-card:hover {
            border-color: #667eea;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
            transform: translateY(-2px);
        }

        .lesson-card h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .lesson-info {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 15px;
        }

        .lesson-info-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #666;
        }

        .lesson-info-item strong {
            color: #333;
            min-width: 90px;
        }

        .capacity-bar {
            margin: 15px 0;
        }

        .capacity-bar-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 0.9rem;
            color: #666;
        }

        .capacity-bar-track {
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
        }

        .capacity-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.3s;
        }

        .capacity-bar-fill.full {
            background: linear-gradient(90deg, #f093fb 0%, #f5576c 100%);
        }

        .lesson-actions {
            display: flex;
            gap: 10px;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            transform: translateX(400px);
            transition: transform 0.3s;
            z-index: 1000;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background: #28a745;
        }

        .notification.info {
            background: #17a2b8;
        }

        .info-box {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        @media (max-width: 768px) {
            .lessons-grid {
                grid-template-columns: 1fr;
            }
            .form-row {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üéØ Centrum Rub√°ƒçek</h1>
            <p>Rezervaƒçn√≠ Syst√©m pro Lekce</p>
            <span class="test-badge">üß™ TEST VERZE - Mockovan√° Data</span>
        </header>

        <nav class="tabs">
            <button class="tab active" onclick="showTab('lessons')">üìÖ Lekce</button>
            <button class="tab" onclick="showTab('register')">üë• Registrace</button>
            <button class="tab" onclick="showTab('substitution')">üîÑ N√°hradn√≠ Lekce</button>
            <button class="tab" onclick="showTab('excel')">üìä Import Excel</button>
        </nav>

        <!-- Lessons Tab -->
        <div class="tab-content active" id="lessons">
            <div class="section-header">
                <h2>P≈ôehled Lekc√≠</h2>
                <button class="btn btn-primary" onclick="showAddForm()">+ P≈ôidat Lekci</button>
            </div>

            <div id="add-form" class="form-card" style="display: none;">
                <h3>Nov√° Lekce</h3>
                <form onsubmit="addLesson(event)">
                    <div class="form-group">
                        <label>N√°zev lekce:</label>
                        <input type="text" name="title" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Den:</label>
                            <select name="day" required>
                                <option value="Monday">Pondƒõl√≠</option>
                                <option value="Tuesday">√öter√Ω</option>
                                <option value="Wednesday">St≈ôeda</option>
                                <option value="Thursday">ƒåtvrtek</option>
                                <option value="Friday">P√°tek</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>ƒåas:</label>
                            <input type="time" name="time" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Lokace:</label>
                        <input type="text" name="location" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Vƒõkov√° skupina:</label>
                            <select name="ageGroup" required>
                                <option value="3-12 months">3-12 mƒõs√≠c≈Ø</option>
                                <option value="1-2 years">1-2 roky</option>
                                <option value="2-3 years">2-3 roky</option>
                                <option value="3-4 years">3-4 roky</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Kapacita:</label>
                            <input type="number" name="capacity" min="1" required>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">Ulo≈æit</button>
                        <button type="button" class="btn btn-secondary" onclick="hideAddForm()">Zru≈°it</button>
                    </div>
                </form>
            </div>

            <div id="lessons-list" class="lessons-grid"></div>
        </div>

        <!-- Register Tab -->
        <div class="tab-content" id="register">
            <h2>Registrace √öƒçastn√≠ka</h2>
            <form onsubmit="register(event)" class="form-card">
                <div class="form-group">
                    <label>Vyberte lekci:</label>
                    <select name="lessonId" id="lesson-select" required></select>
                </div>
                <h3>√ödaje √∫ƒçastn√≠ka</h3>
                <div class="form-group">
                    <label>Jm√©no:</label>
                    <input type="text" name="name" required>
                </div>
                <div class="form-group">
                    <label>Email:</label>
                    <input type="email" name="email" required>
                </div>
                <div class="form-group">
                    <label>Telefon:</label>
                    <input type="tel" name="phone" required>
                </div>
                <div class="form-group">
                    <label>Vƒõkov√° skupina:</label>
                    <select name="ageGroup" required>
                        <option value="3-12 months">3-12 mƒõs√≠c≈Ø</option>
                        <option value="1-2 years">1-2 roky</option>
                        <option value="2-3 years">2-3 roky</option>
                        <option value="3-4 years">3-4 roky</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary">Registrovat</button>
            </form>
        </div>

        <!-- Substitution Tab -->
        <div class="tab-content" id="substitution">
            <h2>N√°hradn√≠ Lekce</h2>
            <div class="form-card">
                <div class="form-group">
                    <label>Vƒõkov√° skupina:</label>
                    <select id="sub-age" onchange="loadSubstitutions()">
                        <option value="">-- Vyberte --</option>
                        <option value="3-12 months">3-12 mƒõs√≠c≈Ø</option>
                        <option value="1-2 years">1-2 roky</option>
                        <option value="2-3 years">2-3 roky</option>
                        <option value="3-4 years">3-4 roky</option>
                    </select>
                </div>
                <div id="sub-list"></div>
            </div>
        </div>

        <!-- Excel Tab -->
        <div class="tab-content" id="excel">
            <h2>Import √öƒçastn√≠k≈Ø z Excel</h2>
            <div class="form-card">
                <div class="info-box">
                    <h3>üìã Form√°t Excel souboru:</h3>
                    <p><strong>V testovac√≠ verzi:</strong> Simuluje nahr√°n√≠ souboru s 5 √∫ƒçastn√≠ky</p>
                    <p>Kliknƒõte na "Simulovat Import" pro otestov√°n√≠ funkce</p>
                </div>
                <div class="form-group">
                    <label>Vyberte lekci:</label>
                    <select id="excel-lesson" required></select>
                </div>
                <button class="btn btn-primary" onclick="simulateExcelImport()">Simulovat Import (5 √∫ƒçastn√≠k≈Ø)</button>
            </div>
        </div>
    </div>

    <div id="notification" class="notification"></div>

    <script>
        // Mock data store
        let lessons = [
            {
                id: '1',
                title: 'Cviƒçen√≠ pro maminky s dƒõtmi - Pondƒõl√≠ dopoledne',
                day: 'Monday',
                time: '10:00',
                location: 'CVƒå Vietnamsk√°',
                ageGroup: '3-12 months',
                capacity: 10,
                enrolled: 3
            },
            {
                id: '2',
                title: 'Cviƒçen√≠ pro maminky s dƒõtmi - √öter√Ω odpoledne',
                day: 'Tuesday',
                time: '14:00',
                location: 'CVƒå Jeremi√°≈°e',
                ageGroup: '1-2 years',
                capacity: 12,
                enrolled: 8
            },
            {
                id: '3',
                title: 'Cviƒçen√≠ pro maminky s dƒõtmi - St≈ôeda dopoledne',
                day: 'Wednesday',
                time: '10:00',
                location: 'DK Poklad',
                ageGroup: '2-3 years',
                capacity: 15,
                enrolled: 12
            }
        ];

        const days = {
            'Monday': 'Pondƒõl√≠',
            'Tuesday': '√öter√Ω',
            'Wednesday': 'St≈ôeda',
            'Thursday': 'ƒåtvrtek',
            'Friday': 'P√°tek'
        };

        const ageGroups = {
            '3-12 months': '3-12 mƒõs√≠c≈Ø',
            '1-2 years': '1-2 roky',
            '2-3 years': '2-3 roky',
            '3-4 years': '3-4 roky'
        };

        function showTab(tabName) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');

            if (tabName === 'register' || tabName === 'excel') {
                updateLessonSelects();
            }
        }

        function showNotification(message, type = 'success') {
            const notif = document.getElementById('notification');
            notif.textContent = message;
            notif.className = `notification ${type} show`;
            setTimeout(() => notif.classList.remove('show'), 3000);
        }

        function renderLessons() {
            const container = document.getElementById('lessons-list');
            container.innerHTML = lessons.map(lesson => {
                const fillPercent = (lesson.enrolled / lesson.capacity) * 100;
                const isFull = lesson.enrolled >= lesson.capacity;

                return `
                    <div class="lesson-card">
                        <h3>${lesson.title}</h3>
                        <div class="lesson-info">
                            <div class="lesson-info-item">
                                <strong>üìÖ Den:</strong> ${days[lesson.day]}
                            </div>
                            <div class="lesson-info-item">
                                <strong>üïê ƒåas:</strong> ${lesson.time}
                            </div>
                            <div class="lesson-info-item">
                                <strong>üìç M√≠sto:</strong> ${lesson.location}
                            </div>
                            <div class="lesson-info-item">
                                <strong>üë∂ Vƒõk:</strong> ${ageGroups[lesson.ageGroup]}
                            </div>
                        </div>
                        <div class="capacity-bar">
                            <div class="capacity-bar-label">
                                <span>Obsazenost</span>
                                <span><strong>${lesson.enrolled}/${lesson.capacity}</strong></span>
                            </div>
                            <div class="capacity-bar-track">
                                <div class="capacity-bar-fill ${isFull ? 'full' : ''}" style="width: ${fillPercent}%"></div>
                            </div>
                        </div>
                        <div class="lesson-actions">
                            <button class="btn btn-danger" onclick="deleteLesson('${lesson.id}')">Smazat</button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function showAddForm() {
            document.getElementById('add-form').style.display = 'block';
        }

        function hideAddForm() {
            document.getElementById('add-form').style.display = 'none';
        }

        function addLesson(event) {
            event.preventDefault();
            const form = event.target;
            const data = new FormData(form);

            const newLesson = {
                id: Date.now().toString(),
                title: data.get('title'),
                day: data.get('day'),
                time: data.get('time'),
                location: data.get('location'),
                ageGroup: data.get('ageGroup'),
                capacity: parseInt(data.get('capacity')),
                enrolled: 0
            };

            lessons.push(newLesson);
            renderLessons();
            hideAddForm();
            form.reset();
            showNotification('Lekce byla √∫spƒõ≈°nƒõ p≈ôid√°na!');
        }

        function deleteLesson(id) {
            if (confirm('Opravdu chcete smazat tuto lekci?')) {
                lessons = lessons.filter(l => l.id !== id);
                renderLessons();
                showNotification('Lekce byla smaz√°na');
            }
        }

        function updateLessonSelects() {
            const selects = [
                document.getElementById('lesson-select'),
                document.getElementById('excel-lesson')
            ];

            selects.forEach(select => {
                if (select) {
                    select.innerHTML = '<option value="">-- Vyberte lekci --</option>' +
                        lessons.map(l => `<option value="${l.id}">${l.title} - ${days[l.day]} ${l.time}</option>`).join('');
                }
            });
        }

        function register(event) {
            event.preventDefault();
            const form = event.target;
            const data = new FormData(form);
            const lessonId = data.get('lessonId');
            const lesson = lessons.find(l => l.id === lessonId);

            if (!lesson) return;

            if (lesson.enrolled < lesson.capacity) {
                lesson.enrolled++;
                showNotification('√öƒçastn√≠k byl √∫spƒõ≈°nƒõ zaregistrov√°n!');
                renderLessons();
            } else {
                showNotification('Lekce je pln√°. √öƒçastn√≠k byl p≈ôid√°n na ƒçekac√≠ listinu.', 'info');
            }

            form.reset();
        }

        function loadSubstitutions() {
            const ageGroup = document.getElementById('sub-age').value;
            const container = document.getElementById('sub-list');

            if (!ageGroup) {
                container.innerHTML = '';
                return;
            }

            const available = lessons.filter(l =>
                l.ageGroup === ageGroup && l.enrolled < l.capacity
            );

            if (available.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #999; padding: 20px;">≈Ω√°dn√© dostupn√© n√°hradn√≠ lekce.</p>';
                return;
            }

            container.innerHTML = `
                <h3 style="margin: 20px 0 15px;">Dostupn√© n√°hradn√≠ lekce:</h3>
                <div class="lessons-grid">
                    ${available.map(lesson => {
                        const fillPercent = (lesson.enrolled / lesson.capacity) * 100;
                        const spots = lesson.capacity - lesson.enrolled;

                        return `
                            <div class="lesson-card">
                                <h3>${lesson.title}</h3>
                                <div class="lesson-info">
                                    <div class="lesson-info-item">
                                        <strong>üìÖ Den:</strong> ${days[lesson.day]}
                                    </div>
                                    <div class="lesson-info-item">
                                        <strong>üïê ƒåas:</strong> ${lesson.time}
                                    </div>
                                    <div class="lesson-info-item">
                                        <strong>üìç M√≠sto:</strong> ${lesson.location}
                                    </div>
                                    <div class="lesson-info-item">
                                        <strong>‚úÖ Voln√° m√≠sta:</strong> ${spots}
                                    </div>
                                </div>
                                <div class="capacity-bar">
                                    <div class="capacity-bar-label">
                                        <span>Obsazenost</span>
                                        <span><strong>${lesson.enrolled}/${lesson.capacity}</strong></span>
                                    </div>
                                    <div class="capacity-bar-track">
                                        <div class="capacity-bar-fill" style="width: ${fillPercent}%"></div>
                                    </div>
                                </div>
                            </div>
                        `;
                    }).join('')}
                </div>
            `;
        }

        function simulateExcelImport() {
            const lessonId = document.getElementById('excel-lesson').value;
            if (!lessonId) {
                alert('Pros√≠m vyberte lekci');
                return;
            }

            const lesson = lessons.find(l => l.id === lessonId);
            if (!lesson) return;

            // Simulate importing 5 participants
            const added = Math.min(5, lesson.capacity - lesson.enrolled);
            lesson.enrolled += added;

            renderLessons();
            showNotification(`√öspƒõ≈°nƒõ zaregistrov√°no ${added} √∫ƒçastn√≠k≈Ø z Excel souboru!`);
        }

        // Initialize
        renderLessons();
        updateLessonSelects();
    </script>
</body>
</html>
